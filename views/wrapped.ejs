<%
    // --- –•–ï–õ–ü–ï–† –î–õ–Ø –ß–ò–°–ï–õ ---
    function formatBigNum(num, type = 'standard') {
        if (!num) return '0';
        if (type === 'voice') return Math.floor(num / 3600) + ' —á.';
        if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M'; 
        if (num >= 1000) return (num / 1000).toFixed(1) + 'K';      
        return num.toLocaleString();
    }
%>
<!DOCTYPE html>
<html lang="ru">
<head>
    <%- include('partials/head', { title: title }) %>
    <link rel="stylesheet" href="/css/wrapped.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css"></noscript>
    <style>
        /* –î–æ–ø. —Å—Ç–∏–ª—å –¥–ª—è —Å–µ–∫—Ü–∏–∏ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
        .full-width-chapter {
            width: 100%;
            padding: 80px 20px;
            background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.8), transparent);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* –°–∞–º–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
        .sb-image img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* –ß—Ç–æ–±—ã —Ñ–æ—Ç–æ –∑–∞–ø–æ–ª–Ω—è–ª–æ –∫—Ä—É–≥ –±–µ–∑ –∏—Å–∫–∞–∂–µ–Ω–∏–π */
            display: block;
        }
        
        /* –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –º–æ–±–∏–ª–æ–∫ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) */
        @media (max-width: 768px) {
            .sb-image {
                width: 60px;
                height: 60px;
            }
        }
    </style>
</head>
<body>
    <%- include('partials/navbar') %>

    <div class="bg-universe" id="starfield">
        <div class="nebula n-1"></div>
        <div class="nebula n-2"></div>
    </div>

    <div class="wrapped-container">

        <div class="hero-wrap">
            <div data-aos="zoom-in" data-aos-duration="1000">
                <div class="hero-year">2025</div>
                <h1 class="hero-sub">WRAPPED</h1>
            </div>
            <div class="scroll-hint"><i class="fas fa-chevron-down"></i> –õ–∏—Å—Ç–∞–π –≤–Ω–∏–∑</div>
        </div>

        <div class="chapter">
            <h2 class="chapter-title" data-aos="fade-right">–ì–ª–∞–≤–∞ 1: –ú–∞—Å—à—Ç–∞–±</h2>
            
            <div class="stat-row">
                <div class="big-stat" data-tilt data-aos="fade-up" data-aos-delay="100">
                    <div class="bs-icon">üë•</div>
                    <div class="bs-val counter" data-target="<%= stats.totalUsers %>">0</div>
                    <div class="bs-lbl">–ü—á–µ–ª–æ–≤–æ–¥–æ–≤</div>
                </div>
                <div class="big-stat" data-tilt data-aos="fade-up" data-aos-delay="200">
                    <div class="bs-icon">üí¨</div>
                    <div class="bs-val" title="<%= stats.global.totalMsgs.toLocaleString() %>">
                        <%= formatBigNum(stats.global.totalMsgs) %>
                    </div>
                    <div class="bs-lbl">–°–æ–æ–±—â–µ–Ω–∏–π</div>
                </div>
            </div>

            <div class="stat-row">
                <div class="big-stat" style="border-color: var(--rose);" data-tilt data-aos="fade-up">
                    <div class="bs-icon">üéôÔ∏è</div>
                    <div class="bs-val" title="<%= Math.floor(stats.global.totalVoice / 3600).toLocaleString() %> —á–∞—Å–æ–≤">
                        <%= formatBigNum(stats.global.totalVoice, 'voice') %>
                    </div>
                    <div class="bs-lbl">–ì–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞–∫—Ç–∏–≤–∞</div>
                </div>
                
                <div class="big-stat" style="border-color: var(--gold);" data-tilt data-aos="fade-up" data-aos-delay="100">
                    <div class="bs-icon">üëª</div>
                    <div class="bs-val"><%= formatBigNum(stats.global.totalGhosts) %></div>
                    <div class="bs-lbl">–ü–æ–π–º–∞–Ω–æ –ø—Ä–∏–∑—Ä–∞–∫–æ–≤</div>
                    <div style="font-size: 0.7rem; color: #666; margin-top: 5px; font-weight: 600;">
                        –•—ç–ª–ª–æ—É–∏–Ω –∏–≤–µ–Ω—Ç (18 –æ–∫—Ç - 1 –Ω–æ—è)
                    </div>
                </div>
            </div>
        </div>

        <div class="chapter">
            <h2 class="chapter-title" data-aos="fade-right">–ì–ª–∞–≤–∞ 2: –¢–∏—Ç–∞–Ω—ã</h2>

            <% if (stats.richest) { %>
            <div class="leader-spotlight" data-aos="zoom-in">
                <div class="ls-bg"></div>
                <div class="ls-avatar-wrap">
                    <div class="ls-crown">üëë</div>
                    <img src="/img/proxy/avatar/<%= stats.richest.userId %>/<%= stats.richest.avatar %>" 
                         class="ls-avatar" alt="<%= stats.richest.username %>" loading="lazy">
                </div>
                <div class="ls-info">
                    <h3>–ë–æ–≥–∞—Ç–µ–π—à–∏–π –∏–≥—Ä–æ–∫</h3>
                    <div class="ls-name"><%= stats.richest.username %></div>
                    <div class="ls-stat"><%= formatBigNum(stats.richest.stars) %> ‚≠ê</div>
                </div>
            </div>
            <% } %>

            <div class="grid-leaders">
                <% if (stats.topTrader) { %>
                <div class="l-card" data-aos="fade-up" style="border-color: var(--cyan);">
                    <div class="l-icon">üìà</div>
                    <div class="l-info">
                        <h4>–¢—Ä–µ–π–¥–µ—Ä –ì–æ–¥–∞</h4>
                        <h3><%= stats.topTrader.username %></h3>
                        <p style="color: var(--cyan);">–û–±–æ—Ä–æ—Ç: <%= formatBigNum(stats.topTrader.volume) %> ‚≠ê</p>
                    </div>
                </div>
                <% } %>

                <% if (stats.richestShards) { %>
                <div class="l-card" data-aos="fade-up" data-aos-delay="100" style="border-color: #00f3ff;">
                    <div class="l-icon">‚ú®</div>
                    <div class="l-info">
                        <h4>–ú–∞–≥–Ω–∞—Ç –û—Å–∫–æ–ª–∫–æ–≤</h4>
                        <h3><%= stats.richestShards.username %></h3>
                        <p style="color: #00f3ff;"><%= stats.richestShards.shards %> —à—Ç.</p>
                    </div>
                </div>
                <% } %>
            </div>
        </div>

        <div class="market-strip">
            <div class="ticker-move">
                <span class="t-item">–û–ë–û–†–û–¢ –ë–ò–†–ñ–ò: <b><%= formatBigNum(stats.market.volume) %> ‚≠ê</b></span>
                <span class="t-item">–°–î–ï–õ–û–ö: <b><%= stats.market.trades %></b></span>
                <span class="t-item">–ê–ö–¶–ò–Ø –ì–û–î–ê: <b>$<%= stats.market.popularStock %></b></span>
                <span class="t-item">–û–ë–û–†–û–¢ –ë–ò–†–ñ–ò: <b><%= formatBigNum(stats.market.volume) %> ‚≠ê</b></span>
                <span class="t-item">–°–î–ï–õ–û–ö: <b><%= stats.market.trades %></b></span>
            </div>
        </div>

        <div class="chapter">
            <h2 class="chapter-title" data-aos="fade-right">–ì–ª–∞–≤–∞ 3: –õ–µ–≥–µ–Ω–¥—ã</h2>
            
            <div class="grid-leaders">
                
                <% if (stats.chatty) { %>
                <div class="l-card" data-aos="fade-up">
                    <div class="l-icon">üí¨</div>
                    <div class="l-info">
                        <h4>–î—É—à–∞ –ß–∞—Ç–∞</h4>
                        <h3><%= stats.chatty.username %></h3>
                        <p><%= formatBigNum(stats.chatty.totalMessages) %> —Å–º—Å</p>
                    </div>
                </div>
                <% } %>

                <% if (stats.voice) { %>
                <div class="l-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="l-icon">üéôÔ∏è</div>
                    <div class="l-info">
                        <h4>–ì–æ–ª–æ—Å –°–µ—Ä–≤–µ—Ä–∞</h4>
                        <h3><%= stats.voice.username %></h3>
                        <p><%= formatBigNum(stats.voice.totalVoiceTime, 'voice') %></p>
                    </div>
                </div>
                <% } %>

                <% if (stats.taxPayer) { %>
                <div class="l-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="l-icon">üí∏</div>
                    <div class="l-info">
                        <h4>–°–ø–æ–Ω—Å–æ—Ä –ö–∞–∑–Ω—ã</h4>
                        <h3><%= stats.taxPayer.username %></h3>
                        <p>–ù–∞–ª–æ–≥: <%= formatBigNum(stats.taxPayer.totalStarsPaidInTax) %></p>
                    </div>
                </div>
                <% } %>

                <% if (stats.reputation) { %>
                <div class="l-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="l-icon">üëç</div>
                    <div class="l-info">
                        <h4>–ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç</h4>
                        <h3><%= stats.reputation.username %></h3>
                        <p>–†–µ–ø—É—Ç–∞—Ü–∏—è: <%= stats.reputation.reputation %></p>
                    </div>
                </div>
                <% } %>

                <% if (stats.ghostHunter) { %>
                <div class="l-card" data-aos="fade-up" data-aos-delay="400">
                    <div class="l-icon">üëª</div>
                    <div class="l-info">
                        <h4>–û—Ö–æ—Ç–Ω–∏–∫</h4>
                        <h3><%= stats.ghostHunter.username %></h3>
                        <p>–ü–æ–π–º–∞–ª: <%= stats.ghostHunter.event_ghostsCaught %></p>
                    </div>
                </div>
                <% } %>
                
                <% if (stats.topAchiever) { %>
                <div class="l-card" data-aos="fade-up" data-aos-delay="500" style="border-color: #e91e63;">
                    <div class="l-icon">üèÜ</div>
                    <div class="l-info">
                        <h4>–¢—Ä–æ—Ñ–∏ –•–∞–Ω—Ç–µ—Ä</h4>
                        <h3><%= stats.topAchiever.username %></h3>
                        <p><%= stats.topAchiever.achCount %> –∞—á–∏–≤–æ–∫</p>
                    </div>
                </div>
                <% } %>

            </div>
        </div>

    </div> <div class="full-width-chapter">
        <h2 class="chapter-title" data-aos="fade-down">–ì–ª–∞–≤–∞ 4: –ü—É—Ç—å –ì–µ—Ä–æ–µ–≤</h2>
        
       <div class="timeline-feed" style="max-width: 1200px; width: 100%;">

                <div class="story-block" data-aos="fade-right">
                    <div class="sb-image">
                        <img src="/assets/img/wrapped/1_start.png" alt="Start">
                    </div>
                    <div class="sb-content">
                        <span class="sb-date">1 –§–µ–≤—Ä–∞–ª—è 2025</span>
                        <h3>–í–µ–ª–∏–∫–æ–µ –ù–∞—á–∞–ª–æ</h3>
                        <p>–ú—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏ –ø–µ—Ä–≤—ã–π —Å–∞–π—Ç bandazeyna.com –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏. –≠—Ç–æ –±—ã–ª –ø—Ä–æ—Å—Ç–æ–π —à–∞–≥, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ª–æ–∂–∏–ª —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –≤—Å–µ–π —Ç–µ–∫—É—â–µ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã.</p>
                    </div>
                </div>

                <div class="story-block reverse" data-aos="fade-left">
                    <div class="sb-image">
                        <img src="/assets/img/wrapped/2_year.png" alt="Anniversary">
                    </div>
                    <div class="sb-content">
                        <span class="sb-date">12 –ú–∞—è 2025</span>
                        <h3>–ì–æ–¥ –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É</h3>
                        <p>–ù–∞—à–µ–º—É –±–æ—Ç—É –∏—Å–ø–æ–ª–Ω–∏–ª—Å—è —Ä–æ–≤–Ω–æ –≥–æ–¥. –ó–∞ —ç—Ç–æ –≤—Ä–µ–º—è –æ–Ω –≤—Å—Ç—Ä–µ—Ç–∏–ª —Ç—ã—Å—è—á–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –ø–æ–ø—Ä–æ—â–∞–ª—Å—è —Å —Å–æ—Ç–Ω—è–º–∏, –Ω–æ –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–≤–∞–ª—Å—è —Å–µ—Ä–¥—Ü–µ–º —Å–µ—Ä–≤–µ—Ä–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —É—é—Ç –∏ –ø–æ—Ä—è–¥–æ–∫.</p>
                    </div>
                </div>

                <div class="story-block" data-aos="fade-right">
                    <div class="sb-image">
                        <img src="/assets/img/wrapped/3_epoch.png" alt="Epoch 2.0">
                    </div>
                    <div class="sb-content">
                        <span class="sb-date">1 –ò—é–Ω—è 2025</span>
                        <h3>–≠–ø–æ—Ö–∞ 2.0</h3>
                        <p>–ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –±–æ—Ç–∞. –ú—ã –ø–µ—Ä–µ–ø–∏—Å–∞–ª–∏ –∫–æ–¥ —Å –Ω—É–ª—è, –æ–±–Ω—É–ª–∏–ª–∏ —ç–∫–æ–Ω–æ–º–∏–∫—É –∏ –¥–∞–ª–∏ –≤—Å–µ–º —Å—Ç–∞—Ä—Ç —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞. –ù–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏, –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ–≤–∞—è –∂–∏–∑–Ω—å.</p>
                    </div>
                </div>

                <div class="story-block reverse" data-aos="fade-left">
                    <div class="sb-image">
                        <img src="/assets/img/wrapped/4_market.png" alt="Market">
                    </div>
                    <div class="sb-content">
                        <span class="sb-date">31 –ò—é–ª—è 2025</span>
                        <h3>–†–æ–∂–¥–µ–Ω–∏–µ –ë–∏—Ä–∂–∏</h3>
                        <p>–í–≤–µ–¥–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–∫—Ü–∏–π. –ò–≥—Ä–æ–∫–∏ –ø–æ–ª—É—á–∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –ó–≤–µ–∑–¥—ã, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—ã–Ω–æ–∫ –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ —Ä–æ—Å—Ç–µ –∫—É—Ä—Å–æ–≤. –≠–∫–æ–Ω–æ–º–∏–∫–∞ –≤—ã—à–ª–∞ –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å.</p>
                    </div>
                </div>

                <div class="story-block" data-aos="fade-right">
                    <div class="sb-image">
                        <img src="/assets/img/wrapped/5_battle.png" alt="Battle">
                    </div>
                    <div class="sb-content">
                        <span class="sb-date">9 –ê–≤–≥—É—Å—Ç–∞ 2025</span>
                        <h3>–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∞—è –ë–∏—Ç–≤–∞</h3>
                        <p>–°–∞–º—ã–π –∫—Ä—É–ø–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä –ø–æ Fall Guys: 30+ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –ø—Ä—è–º–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –Ω–∞ Twitch —Å –ø–∏–∫–æ–≤—ã–º –æ–Ω–ª–∞–π–Ω–æ–º –∏ –≥–æ—Ä—ã –ø—Ä–∏–∑–æ–≤. –≠—Ç–æ –±—ã–ª–æ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ!</p>
                    </div>
                </div>

                <div class="story-block reverse" data-aos="fade-left">
                    <div class="sb-image">
                         <img src="/assets/img/wrapped/6_20k.png" alt="20k">
                    </div>
                    <div class="sb-content">
                        <span class="sb-date">23 –ê–≤–≥—É—Å—Ç–∞ 2025</span>
                        <h3>–†—É–±–µ–∂ 20,000</h3>
                        <p>–ù–∞—Å —Å—Ç–∞–ª–æ 20 —Ç—ã—Å—è—á! –í —á–µ—Å—Ç—å —ç—Ç–æ–≥–æ –º—ã –≤–≤–µ–ª–∏ —Å–∏—Å—Ç–µ–º—É –ì–∞—Ä–∞–Ω—Ç–æ–≤ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –≤ BSS. (–í—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–∑-–∑–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Ç—Ä–µ–π–¥–æ–≤ –≤ –∏–≥—Ä–µ, –Ω–æ –º—ã –∂–¥–µ–º –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è!).</p>
                    </div>
                </div>

                <div class="story-block" data-aos="fade-right">
                    <div class="sb-image">
                        <img src="/assets/img/wrapped/7_ghosts.png" alt="Ghosts">
                    </div>
                    <div class="sb-content">
                        <span class="sb-date">18 –û–∫—Ç—è–±—Ä—è 2025</span>
                        <h3>–û—Ö–æ—Ç–∞ –Ω–∞ –ü—Ä–∏–∑—Ä–∞–∫–æ–≤</h3>
                        <p>–°—Ç–∞—Ä—Ç –º–∞—Å—à—Ç–∞–±–Ω–æ–≥–æ –•—ç–ª–ª–æ—É–∏–Ω—Å–∫–æ–≥–æ –∏–≤–µ–Ω—Ç–∞. –í–µ—Å—å —Å–µ—Ä–≤–µ—Ä –ª–æ–≤–∏–ª –¥—É—Ö–æ–≤ –≤ —á–∞—Ç–µ, —Å–æ–±–∏—Ä–∞–ª –∫–æ–Ω—Ñ–µ—Ç—ã –∏ –∫—Ä–∞—Ñ—Ç–∏–ª —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –º–∞—Å–∫–∏. –°–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –≥–æ–¥–∞.</p>
                    </div>
                </div>

                <div class="story-block reverse" data-aos="fade-left">
                    <div class="sb-image">
                        <img src="/assets/img/wrapped/8_black_monday.png" alt="Black Monday">
                    </div>
                    <div class="sb-content">
                        <span class="sb-date" style="color: #ef4444; border-color: #ef4444;">27 –û–∫—Ç—è–±—Ä—è 2025</span>
                        <h3>–ß–µ—Ä–Ω—ã–π –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</h3>
                        <p>–î–µ–Ω—å, –∫–æ–≥–¥–∞ —Ä—ã–Ω–æ–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è. –ú—ã –≤–≤–µ–ª–∏ –Ω–∞–ª–æ–≥–∏ –∏ –∫–æ–º–∏—Å—Å–∏–∏ –Ω–∞ –±–∏—Ä–∂–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –∏ —Å–ø–∞—Å—Ç–∏ —ç–∫–æ–Ω–æ–º–∏–∫—É –æ—Ç –∏–Ω—Ñ–ª—è—Ü–∏–∏. –ñ–µ—Å—Ç–∫–æ, –Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.</p>
                    </div>
                </div>

            </div>
    </div>


<div class="chapter final-chapter">
            <h2 data-aos="zoom-in">–°–ø–∞—Å–∏–±–æ –∑–∞ —ç—Ç–æ—Ç –≥–æ–¥!</h2>
            <p data-aos="fade-up" data-aos-delay="200">
                –ú—ã —Ä–∞—Å—Ç–µ–º –∏ —Ä–∞–∑–≤–∏–≤–∞–µ–º—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è –≤–∞–º.
            </p>
            <a href="/profile" class="btn-profile-big" data-aos="fade-up" data-aos-delay="400">
                –ú–û–ô –ü–†–û–§–ò–õ–¨ <i class="fas fa-arrow-right"></i>
            </a>
        </div>

    <%- include('partials/footer') %>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js" defer nonce="<%= nonce %>"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js" defer nonce="<%= nonce %>"></script>

    <script nonce="<%= nonce %>">
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof AOS !== 'undefined') AOS.init({ duration: 1000, once: true });
            else setTimeout(() => AOS.init({ duration: 1000, once: true }), 500);

            const counters = document.querySelectorAll('.counter');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const counter = entry.target;
                        const target = parseInt(counter.getAttribute('data-target')) || 0;
                        
                        if (target === 0) {
                            counter.innerText = "0";
                            return;
                        }

                        let current = 0;
                        const inc = Math.max(1, Math.ceil(target / 100)); 
                        
                        const update = () => {
                            current += inc;
                            if(current < target) {
                                counter.innerText = current.toLocaleString();
                                requestAnimationFrame(update);
                            } else {
                                counter.innerText = target.toLocaleString();
                            }
                        };
                        update();
                        observer.unobserve(counter);
                    }
                });
            }, { threshold: 0.5 });

            counters.forEach(c => observer.observe(c));

            const starfield = document.getElementById('starfield');
            if (starfield) {
                for(let i=0; i<50; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.top = Math.random() * 100 + '%';
                    star.style.left = Math.random() * 100 + '%';
                    star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
                    star.style.animationDelay = Math.random() * 5 + 's';
                    starfield.appendChild(star);
                }
            }
        });
    </script>

    <style>
        .l-icon { font-size: 2.5rem; margin-right: 15px; }
    </style>
</body>
</html>