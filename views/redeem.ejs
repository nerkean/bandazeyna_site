<!DOCTYPE html>
<html lang="ru">
<head>
    <%- include('partials/head', { title: '–ê–∫—Ç–∏–≤–∞—Ü–∏—è –±–æ–Ω—É—Å–æ–≤ | Dacha Awards' }) %>
    <style>
        .redeem-page { 
            padding: 160px 5% 100px; 
            min-height: 100vh;
            background: radial-gradient(circle at center, #1a1a2e 0%, #050505 100%);
            display: flex; justify-content: center; align-items: flex-start;
        }

        .redeem-card { 
            background: rgba(18, 20, 26, 0.8); 
            backdrop-filter: blur(20px);
            max-width: 500px; width: 100%;
            padding: 50px 40px; 
            border-radius: 30px; 
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 30px 60px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
        }

        .redeem-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: linear-gradient(90deg, #5865F2, #ff0055);
        }

        .redeem-card h2 { font-size: 2rem; font-weight: 900; margin-bottom: 15px; color: #fff; text-transform: uppercase; }
        .redeem-card h2 i { color: #5865F2; margin-right: 10px; }
        .redeem-desc { color: #888; font-size: 0.95rem; margin-bottom: 35px; line-height: 1.5; }

        .redeem-input { 
            width: 100%; padding: 18px; 
            background: rgba(0, 0, 0, 0.5); 
            border: 2px solid rgba(255, 255, 255, 0.1); 
            border-radius: 15px; color: #fff; 
            font-family: 'JetBrains Mono', monospace; 
            font-size: 1.3rem; text-align: center; 
            text-transform: uppercase; transition: 0.3s;
        }

        .redeem-input:focus { border-color: #5865F2; outline: none; background: #000; }

        .btn-redeem { 
            width: 100%; padding: 18px; background: #5865F2; color: #fff; border: none;
            border-radius: 15px; font-weight: 800; text-transform: uppercase;
            letter-spacing: 2px; cursor: pointer; transition: 0.3s; margin-top: 20px;
        }

        .btn-redeem:hover { background: #4752c4; transform: translateY(-2px); }

        #redeemResult { 
            margin-top: 30px; padding: 25px; border-radius: 20px; display: none; 
            animation: trollScale 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .result-troll { 
            background: rgba(239, 68, 68, 0.1); color: #ef4444; 
            border: 1px solid rgba(239, 68, 68, 0.3); 
        }

        .troll-emoji { font-size: 5rem; display: block; margin-bottom: 15px; animation: bounce 1s infinite; }

        @keyframes trollScale { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    </style>
</head>
<body>
    <%- include('partials/navbar') %>
    
    <main class="redeem-page">
        <div class="redeem-card">
            <h2><i class="fas fa-ticket-alt"></i> –ë–æ–Ω—É—Å-—Ü–µ–Ω—Ç—Ä</h2>
            <p class="redeem-desc">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –Ω–∞–≥—Ä–∞–¥ –î–∞—á–∞ Awards. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–æ–¥ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è ‚≠ê.</p>
            
            <input type="text" id="promoInput" class="redeem-input" placeholder="AWARD-XXXXXX" maxlength="20">
            <button class="btn-redeem" id="redeemBtn">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>

            <div id="redeemResult"></div>
        </div>
    </main>

    <script>
        const btn = document.getElementById('redeemBtn');
        const input = document.getElementById('promoInput');
        const result = document.getElementById('redeemResult');

        const urlParams = new URLSearchParams(window.location.search);
        if(urlParams.get('code')) input.value = urlParams.get('code');

        btn.addEventListener('click', () => {
            const code = input.value.trim().toUpperCase();
            if (!code) return;

            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...';
            btn.style.pointerEvents = 'none';

            setTimeout(() => {
                if (code.startsWith('AWARD-')) {
                    result.innerHTML = `
                        <div class="result-troll">
                            <span class="troll-emoji">ü§°</span>
                            <span style="font-size: 1.4rem; font-weight: 900;">–ü–û–ü–ê–õ–°–Ø!</span><br><br>
                            –ú—ã –Ω–µ –ø–æ–æ—â—Ä—è–µ–º –≥–æ–ª–æ—Å–∞ –∑–∞ –Ω–∞–∫—Ä—É—Ç—á–∏–∫–æ–≤ <br>
                            –¢–≤–æ–π –±–∞–ª–∞–Ω—Å –æ—Å—Ç–∞–ª—Å—è –ø—Ä–µ–∂–Ω–∏–º, –Ω–æ —É—Ä–æ–∫ —É—Å–≤–æ–µ–Ω!<br>
                            <small style="opacity: 0.6; display: block; margin-top: 10px;">(–ë–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π —Ñ—Ä–∏–∫–æ–≤)</small>
                        </div>
                    `;
                    result.style.display = 'block';
                    btn.style.display = 'none';
                } else {
                    result.innerHTML = '<div style="color: #666; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">–û—à–∏–±–∫–∞: –î–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ.</div>';
                    result.style.display = 'block';
                    btn.innerHTML = '–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å';
                    btn.style.pointerEvents = 'all';
                }
            }, 2000);
        });
    </script>
</body>
</html>